<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>ржЯрж╛ржХрж╛ рждрзБрж▓рзБржи</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>ЁЯТ░ ржЯрж╛ржХрж╛ рждрзБрж▓рзБржи</h2>
    <p>ржЖржкржирж╛рж░ ржмрж░рзНрждржорж╛ржи ржмрзНржпрж╛рж▓рзЗржирзНрж╕: <strong id="currentBalance">рз│0</strong></p>

    <form onsubmit="submitWithdraw(event)">
      <label>ржкрзЗржорзЗржирзНржЯ ржорзЗржержб:</label><br>
      <select id="method" required>
        <option value="">--ржПржХржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи--</option>
        <option value="bkash">ржмрж┐ржХрж╛рж╢</option>
        <option value="nagad">ржиржЧржж</option>
        <option value="binance">Binance</option>
      </select><br><br>

      <label>ржПржХрж╛ржЙржирзНржЯ ржиржорзНржмрж░ / Binance UID:</label><br>
      <input type="text" id="account" required><br><br>

      <label>ржЯрж╛ржХрж╛ (рз│):</label><br>
      <input type="number" id="amount" required><br><br>

      <button type="submit">тЬЕ Withdraw рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржи</button>
    </form>

    <p id="message" style="color: green; font-weight: bold;"></p>
  </div>

  <script>
    const balance = parseInt(localStorage.getItem("userBalance")) || 0;
    document.getElementById("currentBalance").innerText = `рз│${balance}`;

    function submitWithdraw(e) {
      e.preventDefault();
      const method = document.getElementById("method").value;
      const account = document.getElementById("account").value;
      const amount = parseInt(document.getElementById("amount").value);
      const messageEl = document.getElementById("message");

      if (amount > balance) {
        messageEl.style.color = "red";
        messageEl.innerText = "тЭМ ржЖржкржирж╛рж░ ржкрж░рзНржпрж╛ржкрзНржд ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржирзЗржЗ!";
        return;
      }

      messageEl.style.color = "green";
      messageEl.innerText = `тЬЕ Withdraw рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ (${method}) ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред`;

      // ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржЖржкржбрзЗржЯ
      const newBalance = balance - amount;
      localStorage.setItem("userBalance", newBalance);
      setTimeout(() => {
        window.location.href = "tasks.html";
      }, 3000);
    }
  </script>
</body>
</html>